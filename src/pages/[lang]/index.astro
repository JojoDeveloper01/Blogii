---
import Layout from "@/layouts/Layout.astro";
import Hero from "@/components/Hero.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "@/lib/consts";
import { getLangFromUrl } from "@/i18n/utils";
import { getUser, loadUserBlogsData } from "@/lib/utilsDB";

const user = await getUser(Astro);
const lang = getLangFromUrl(Astro.url);
const blogsData = await loadUserBlogsData(user?.id, Astro);
---

<Layout title={SITE_TITLE} description={SITE_DESCRIPTION} {lang}>
  <Hero {lang} isAuthorized={Boolean(user)} userId={user?.id} {blogsData} />
</Layout>
